
# vkhs - Отправка сообщений с использованием стеганографии и vkapi (proof of concept)

## О программе

С помощью vkhs можно отправлять скрытые сообщения с использованием vkapi и хэш-стеганографии. В процессе отправки контейнер не изменяется, что гарантирует практически абсолютную безопасность.

## Зависимости

Для корректной работы программы потребуется:
1. Python 3.x
2. Библиотеки vk, pymongo, crypto
3. В начале февраля vk решил поменять api. Теперь при авторизации в обязательном порядке должна передаваться версия api. На момент написания этого текста, автор библиотеки vk этого не исправил, поэтому придется вручную добавить 1 строку в библиотеку. В файле site-packages/vk/api.py после 104 строки (method_args = request._api._method_default_args.copy) добавляем "method_args['version'] = '5.73'".
4. MongoDB. 
5. Файлы из репозитория https://github.com/RomaLash/vkhs_POC_img
6. Профиль, пустой альбом фотографий на сайте vk.com

## Установка 

Для установки программы и её дальнейшего использования нужно сделать следующее:
1. Скачиваем файлы этого репозитория и репозитория из Зависимостей.
2. Устанавливаем нужные библиотеки. С установкой crypto на windows могут возникнуть некоторые проблемы - несложные, но неприятные, после которых, однако, все прекрасно работает. Но предпочтительнее использовать Unix подобную систему.
3. Копируем папку trytry в папку с файлами из этого репозитория. 
4. Папка data/db является копией БД. Открываем папку, в которой хранятся файлы MongoDB(по умолчанию - /data/db на Linux,\data\db на Windows). Копируем туда файлы.

## Использование

1. Запускаем mongoDB server - переходим в папку с MongoDB и запускаем в консоли mongod.exe (для Windows), service mongod start (для Linux).
2. Открываем папку с программой.
3. Запускаем программу:
```
python core.py -...
```
| Аргумент | Описание |
| ------- | ------ |
| -e, --encrypt | отправить сообщение |
| -d, --decrypt | получить сообщение |
| -l, --login | логин vk.com |
| -aid, --albumid | id альбома с фотографиями (туда мы будем отправлять сообщение) - нужно только при отправке|
| -aurl, --albumurl | url альбома в виде (albumXXXXXXXX_XXXXXXXX) - нужно только при получении |
| -m, --message | отправляемое сообщение |
| -set, --setup | инициализация конфиг файла. Можно создать конфиг файл, чтобы при многократном использовании не вводить логин и id/url альбома|
| -sto, --store | использование конфиг файла |

## Примеры использования

1. Отправка сообщение без использования конфиг файла: 
```
python core.py -e -l [логин] -aid [xxxxxxxxx] -m Hello World
```
После запроса вводим пароль.

2. Получение сообщение без использования конфиг файла:
```
python core.py -d -l [логин] -aurl [albumxxxxxxxx_xxxxxxxxx] 
```
После запроса вводим пароль.

3. Отправка сообщение с использованием конфиг файла:
```
python core.py -e -set -l [логин] -aid[xxxxxxxxx] -aurl[albumxxxxxxxx_xxxxxxxxx] -m HelloWorld
```
После запроса вводим пароль. В папке появится файл, хранящий в себе в зашифрованном виде информацию, которая была введена выше.

4. Получение сообщения с использованием конфиг файла:
```
python core.py -d -sto 
```
